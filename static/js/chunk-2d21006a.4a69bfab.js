(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21006a"],{b5ab:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{margin:"20px 20px"}},[s("el-input",{attrs:{disabled:"",value:e.$route.params.roleName}}),e._v(" "),s("el-tree",{ref:"tree",attrs:{data:e.data,"node-key":"id","show-checkbox":"","default-expand-all":"","highlight-current":"",props:e.defaultProps}}),e._v(" "),s("el-button",{attrs:{disabled:e.saveBtnDisabled,type:"primary"},on:{click:e.save}},[e._v("保存")])],1)},i=[],a={name:"roleAuth",data:function(){return{saveBtnDisabled:!1,data:[],defaultProps:{children:"children",label:"name"},roleId:""}},watch:{$route:function(e,t){console.log("路由变化......"),console.log(e),console.log(t),this.init()}},created:function(){this.init()},methods:{init:function(){this.$route.params.id&&(this.roleId=this.$route.params.id,this.fetchDataById(this.roleId))},fetchDataById:function(e){var t=this;this.$API.menu.toAssign(e).then((function(e){t.data=e.data.children;var s=JSON.parse(JSON.stringify(t.data)),n=[];t.getJsonToList(n,s[0]["children"]),t.setCheckedKeys(n)}))},getJsonToList:function(e,t){for(var s=0;s<t.length;s++)1==t[s]["select"]&&4==t[s]["level"]&&e.push(t[s]["id"]),null!=t[s]["children"]&&this.getJsonToList(e,t[s]["children"])},getCheckedNodes:function(){console.log(this.$refs.tree.getCheckedNodes())},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)},save:function(){var e=this;this.saveBtnDisabled=!0,console.log(this.$refs.tree.getCheckedKeys().length);var t=this.$refs.tree.getCheckedKeys().join(",");this.$API.menu.doAssign(this.roleId,t).then((function(t){t.success&&(e.$message({type:"success",message:"保存成功"}),e.$router.push({path:"/acl/role/list"}))}))}}},o=a,r=s("2877"),l=Object(r["a"])(o,n,i,!1,null,null,null);t["default"]=l.exports}}]);