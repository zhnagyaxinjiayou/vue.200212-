(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15ff6c8a"],{"2d03":function(e,t,n){"use strict";var a=n("8156"),i=n.n(a);i.a},"5e36":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"角色名称"},model:{value:e.searchObj.roleName,callback:function(t){e.$set(e.searchObj,"roleName",t)},expression:"searchObj.roleName"}})],1),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetchData()}}},[e._v("查询")]),e._v(" "),n("el-button",{attrs:{type:"default"},on:{click:function(t){return e.resetData()}}},[e._v("清空")])],1),e._v(" "),n("div",{staticStyle:{"margin-bottom":"20px"}},[e.$hasBP("role.add")?n("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("添加")]):e._e(),e._v(" "),e.$hasBP("role.remove")?n("el-button",{attrs:{disabled:0===e.multipleSelection.length,type:"danger"},on:{click:function(t){return e.removeRows()}}},[e._v("批量删除")]):e._e()],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"960px"},attrs:{border:"",data:e.list,stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s((e.page-1)*e.limit+t.$index+1)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"角色名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.edit?[n("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:a.roleName,callback:function(t){e.$set(a,"roleName",t)},expression:"row.roleName"}}),e._v(" "),n("el-button",{staticClass:"cancel-btn",attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:function(t){return e.cancelEdit(a)}}},[e._v("\n            cancel\n          ")])]:n("span",[e._v(e._s(a.roleName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.$hasBP("role.acl")?n("router-link",{attrs:{to:"/acl/role/auth/"+a.id}},[n("HintButton",{attrs:{size:"mini",type:"info",icon:"el-icon-info",title:"角色授权"}})],1):e._e(),e._v(" "),e.$hasBP("role.update")&&a.edit?n("HintButton",{attrs:{size:"mini",type:"primary",icon:"el-icon-check",title:"确定"},on:{click:function(t){return e.updateRole(a)}}}):e._e(),e._v(" "),e.$hasBP("role.update")&&!a.edit?n("HintButton",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",title:"修改角色"},on:{click:function(e){a.edit=!0}}}):e._e(),e._v(" "),e.$hasBP("role.remove")?n("HintButton",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",title:"删除角色"},on:{click:function(t){return e.removeDataById(a.id)}}}):e._e()]}}])})],1),e._v(" "),n("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":e.page,total:e.total,"page-size":e.limit,"page-sizes":[5,10,20,30,40,50,100],layout:"sizes, prev, pager, next, jumper, ->, total, slot"},on:{"current-change":e.fetchData,"size-change":e.changeSize}})],1)},i=[],o=(n("ac6a"),{name:"RoleList",data:function(){return{listLoading:!0,list:null,total:0,page:1,limit:10,searchObj:{},multipleSelection:[]}},mounted:function(){this.fetchData()},methods:{cancelEdit:function(e){e.roleName=e.originRoleName,e.edit=!1,this.$message({message:"取消角色修改",type:"warning"})},updateRole:function(e){var t=this,n={id:e.id,roleName:e.roleName};this.$API.role.updateById(n).then((function(n){n.success&&(e.edit=!1,e.originRoleName=e.roleName,t.$message({type:"success",message:n.message}))}))},changeSize:function(e){console.log(e),this.limit=e,this.fetchData(1)},addRole:function(){var e=this;this.$prompt("请输入新名称","添加角色",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var n=t.value;e.$API.role.save({roleName:n}).then((function(t){t.success&&(e.fetchData(),e.$message({type:"success",message:t.message}))}))})).catch((function(){e.$message({type:"info",message:"取消添加"})}))},fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.listLoading=!0,this.$API.role.getPageList(this.page,this.limit,this.searchObj).then((function(t){e.list=t.data.items.map((function(e){return e.edit=!1,e.originRoleName=e.roleName,e})),e.total=t.data.total,e.listLoading=!1}))},resetData:function(){this.searchObj={},this.fetchData()},removeDataById:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.$API.role.removeById(e)})).then((function(e){t.fetchData(t.page),e.success&&t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.multipleSelection=e},removeRows:function(){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[];return e.multipleSelection.forEach((function(e){t.push(e.id)})),e.$API.role.removeRows(t)})).then((function(t){e.fetchData(e.page),t.success&&e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}}),s=o,l=(n("2d03"),n("2877")),c=Object(l["a"])(s,a,i,!1,null,"011ae342",null);t["default"]=c.exports},8156:function(e,t,n){}}]);