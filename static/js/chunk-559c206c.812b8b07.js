(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-559c206c"],{"5c03":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAdd}},[e._v("添加")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.trademarks,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tmName",label:"品牌名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("img",{staticStyle:{width:"100px",height:"60px"},attrs:{src:t.logoUrl,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;t.$index;return[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.showUpdate(r)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.deleteTrademark(r)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"20px"},attrs:{background:"","current-page":e.page,"page-sizes":[3,6,9,12],"page-size":e.limit,layout:"prev, pager, next, jumper, ->, sizes, total",total:e.total},on:{"current-change":e.getTrademarks,"size-change":e.handleSizeChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.id?"更新":"添加",visible:e.isShowDialog},on:{"update:visible":function(t){e.isShowDialog=t}}},[a("el-form",{ref:"tmForm",staticStyle:{width:"80%"},attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"品牌名称","label-width":e.formLabelWidth,prop:"tmName"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入品牌名称"},model:{value:e.form.tmName,callback:function(t){e.$set(e.form,"tmName",t)},expression:"form.tmName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌LOGO","label-width":e.formLabelWidth,prop:"logoUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/dev-api/admin/product/fileUpload","show-file-list":!1,"on-success":e.handleLogoSuccess,"before-upload":e.beforeLogoUpload}},[e.form.logoUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.logoUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isShowDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addOrUpdateTrademark}},[e._v("确 定")])],1)],1)],1)},o=[],i=a("db72"),n=(a("96cf"),a("3b8d")),s={name:"TrademarkList",data:function(){return{loading:!1,trademarks:[],total:0,page:1,limit:3,isShowDialog:!1,form:{tmName:"",logoUrl:""},formLabelWidth:"100px",rules:{tmName:[{required:!0,message:"请输入品牌名称",trigger:"change"},{validator:this.validateTmName,trigger:"blur"}],logoUrl:[{required:!0,message:"请指定LOGO图片"}]}}},mounted:function(){this.getTrademarks()},methods:{validateTmName:function(e,t,a){console.log("validateTmName()",t),t.length<2||t.length>10?a(new Error("长度在 2 到 10 个字符")):a()},handleLogoSuccess:function(e,t){var a=e.data;this.form.logoUrl=a},beforeLogoUpload:function(e){var t=["image/jpeg","image/png"].indexOf(e.type)>=0,a=e.size/1024<500;return t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 500kb!"),t&&a},getTrademarks:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,r,o,i,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,this.page=t,this.loading=!0,e.next=5,this.$API.trademark.getList(t,this.limit);case 5:a=e.sent,this.loading=!1,200===a.code?(r=a.data,o=r.records,i=r.total,this.trademarks=o,this.total=i):this.$message.error("获取品牌列表失败");case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.limit=e,this.getTrademarks()},showAdd:function(){this.form={tmName:"",logoUrl:""},this.isShowDialog=!0},showUpdate:function(e){this.form=Object(i["a"])({},e),this.isShowDialog=!0},addOrUpdateTrademark:function(){var e=this;this.$refs.tmForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=14;break}if(r=e.form,!r.id){t.next=8;break}return t.next=5,e.$API.trademark.update(r);case 5:o=t.sent,t.next=11;break;case 8:return t.next=10,e.$API.trademark.add(r);case 10:o=t.sent;case 11:200===o.code?(e.$message.success("".concat(r.id?"更新":"添加","品牌成功")),e.isShowDialog=!1,e.getTrademarks(r.id?e.page:1),e.form={tmName:"",logoUrl:""}):e.$message.error("".concat(r.id?"更新":"添加","品牌失败")),t.next=14;break;case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteTrademark:function(e){var t=this;this.$confirm("确定删除 ".concat(e.tmName," 吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function a(){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$API.trademark.remove(e.id);case 2:r=a.sent,200===r.code?(t.$message.success("删除品牌成功!"),o=1===t.trademarks.length?t.page-1:t.page,t.getTrademarks(o)):t.$message.error("删除品牌失败!");case 4:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},l=s,c=(a("6809"),a("2877")),m=Object(c["a"])(l,r,o,!1,null,null,null);t["default"]=m.exports},6809:function(e,t,a){"use strict";var r=a("9877"),o=a.n(r);o.a},9877:function(e,t,a){}}]);