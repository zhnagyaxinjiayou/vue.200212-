(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-970074ba","chunk-2d2304c2"],{6925:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.searchObj.username,callback:function(t){e.$set(e.searchObj,"username",t)},expression:"searchObj.username"}})],1),e._v(" "),s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetchData()}}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{type:"default"},on:{click:e.resetData}},[e._v("清空")])],1),e._v(" "),s("div",{staticStyle:{"margin-bottom":"20px"}},[e.$hasBP("user.add")?s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUser()}}},[e._v("添 加")]):e._e(),e._v(" "),e.$hasBP("user.remove")?s("el-button",{attrs:{type:"danger",disabled:0===e.selectedIds.length},on:{click:function(t){return e.removeRows()}}},[e._v("批量删除")]):e._e()],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.list,stripe:""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s((e.page-1)*e.limit+t.$index+1)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"username",label:"用户名",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{prop:"nickName",label:"用户昵称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"gmtCreate",label:"创建时间",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"gmtModified",label:"更新时间",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$hasBP("user.assgin")?s("router-link",{attrs:{to:"/acl/user/role/"+t.row.id+"?username="+t.row.username}},[s("HintButton",{attrs:{type:"info",size:"mini",icon:"el-icon-user-solid",title:"分配角色"}})],1):e._e(),e._v(" "),e.$hasBP("user.update")?s("HintButton",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",title:"修改用户"},on:{click:function(s){return e.toUpdateUser(t.row.id)}}}):e._e(),e._v(" "),e.$hasBP("user.remove")?s("HintButton",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",title:"删除用户"},on:{click:function(s){return e.removeDataById(t.row.id)}}}):e._e()]}}])})],1),e._v(" "),s("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":e.page,total:e.total,"page-size":e.limit,"page-sizes":[5,10,20,30,40,50,100],layout:"sizes, prev, pager, next, jumper, ->, total, slot"},on:{"current-change":e.fetchData,"size-change":e.changeSize}}),e._v(" "),s("AddOrUpdate",{attrs:{isShowDialog:e.isShowDialog,id:e.updateId},on:{cancel:e.onCancel,success:e.onSuccess}})],1)},n=[],i=s("ec4b"),o={name:"AclUserList",data:function(){return{listLoading:!0,list:null,total:0,page:1,limit:10,searchObj:{},selectedIds:[],isShowDialog:!1,updateId:""}},mounted:function(){this.fetchData()},methods:{changeSize:function(e){console.log(e),this.limit=e,this.fetchData(1)},addUser:function(){this.isShowDialog=!0},toUpdateUser:function(e){this.isShowDialog=!0,this.updateId=e},onCancel:function(){this.isShowDialog=!1,this.updateId=""},onSuccess:function(){this.isShowDialog=!1,this.updateId="",this.fetchData(this.page)},fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;console.log("翻页。。。"+t),this.page=t,this.listLoading=!0,this.$API.user.getPageList(this.page,this.limit,this.searchObj).then((function(t){e.list=t.data.items,e.total=t.data.total,e.listLoading=!1}))},resetData:function(){console.log("重置查询表单"),this.searchObj={},this.fetchData()},removeDataById:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.$API.user.removeById(e)})).then((function(e){t.fetchData(t.page),e.success&&t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.selectedIds=e.map((function(e){return e.id}))},removeRows:function(){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.$API.user.removeUsers(e.selectedIds)})).then((function(t){e.fetchData(e.page),t.success&&e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}},components:{AddOrUpdate:i["default"]}},r=o,l=s("2877"),c=Object(l["a"])(r,a,n,!1,null,null,null);t["default"]=c.exports},ec4b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:e.user.id?"修改用户":"添加用户",visible:e.isShowDialog},on:{"update:visible":function(t){e.isShowDialog=t}}},[s("AddOrUpdate"),e._v(" "),s("el-form",{ref:"user",attrs:{model:e.user,rules:e.validateRules,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户昵称"}},[s("el-input",{model:{value:e.user.nickName,callback:function(t){e.$set(e.user,"nickName",t)},expression:"user.nickName"}})],1),e._v(" "),e.user.id?e._e():s("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[s("el-input",{model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.saveOrUpdate}},[e._v("确 定")])],1)],1)},n=[],i=function(e,t,s){!t||t.length<6?s(new Error("密码不能小于6位")):s()},o={name:"AddOrUpdate",props:{id:{type:String,default:""},isShowDialog:{type:Boolean,default:!1}},data:function(){return{user:{},loading:!1,validateRules:{username:[{required:!0,trigger:"blur",message:"用户名必须输入"}],password:[{required:!0,trigger:"blur",validator:i}]}}},watch:{id:function(e){e?this.fetchDataById(e):this.user={}}},mounted:function(){this.init()},methods:{cancel:function(){this.$emit("cancel")},init:function(){var e=this.user.id;e&&this.fetchDataById(e)},saveOrUpdate:function(){var e=this;this.$refs.user.validate((function(t){t&&(e.loading=!0,e.user.id?e.updateData():e.saveData())}))},saveData:function(){var e=this;this.$API.user.save(this.user).then((function(t){t.success&&(e.$message({type:"success",message:t.message}),e.loading=!1,e.$emit("success"))}))},updateData:function(){var e=this;this.$API.user.updateById(this.user).then((function(t){t.success&&(e.$message({type:"success",message:t.message}),e.loading=!1,e.$emit("success"))}))},fetchDataById:function(e){var t=this;this.$API.user.getById(e).then((function(e){t.user=e.data.item}))}}},r=o,l=s("2877"),c=Object(l["a"])(r,a,n,!1,null,null,null);t["default"]=c.exports}}]);