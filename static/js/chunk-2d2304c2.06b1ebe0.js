(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2304c2"],{ec4b:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-dialog",{attrs:{title:e.user.id?"修改用户":"添加用户",visible:e.isShowDialog},on:{"update:visible":function(s){e.isShowDialog=s}}},[t("AddOrUpdate"),e._v(" "),t("el-form",{ref:"user",attrs:{model:e.user,rules:e.validateRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{model:{value:e.user.username,callback:function(s){e.$set(e.user,"username",s)},expression:"user.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"用户昵称"}},[t("el-input",{model:{value:e.user.nickName,callback:function(s){e.$set(e.user,"nickName",s)},expression:"user.nickName"}})],1),e._v(" "),e.user.id?e._e():t("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[t("el-input",{model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.saveOrUpdate}},[e._v("确 定")])],1)],1)},i=[],r=function(e,s,t){!s||s.length<6?t(new Error("密码不能小于6位")):t()},n={name:"AddOrUpdate",props:{id:{type:String,default:""},isShowDialog:{type:Boolean,default:!1}},data:function(){return{user:{},loading:!1,validateRules:{username:[{required:!0,trigger:"blur",message:"用户名必须输入"}],password:[{required:!0,trigger:"blur",validator:r}]}}},watch:{id:function(e){e?this.fetchDataById(e):this.user={}}},mounted:function(){this.init()},methods:{cancel:function(){this.$emit("cancel")},init:function(){var e=this.user.id;e&&this.fetchDataById(e)},saveOrUpdate:function(){var e=this;this.$refs.user.validate((function(s){s&&(e.loading=!0,e.user.id?e.updateData():e.saveData())}))},saveData:function(){var e=this;this.$API.user.save(this.user).then((function(s){s.success&&(e.$message({type:"success",message:s.message}),e.loading=!1,e.$emit("success"))}))},updateData:function(){var e=this;this.$API.user.updateById(this.user).then((function(s){s.success&&(e.$message({type:"success",message:s.message}),e.loading=!1,e.$emit("success"))}))},fetchDataById:function(e){var s=this;this.$API.user.getById(e).then((function(e){s.user=e.data.item}))}}},u=n,o=t("2877"),l=Object(o["a"])(u,a,i,!1,null,null,null);s["default"]=l.exports}}]);